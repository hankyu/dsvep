(window.webpackJsonp=window.webpackJsonp||[]).push([[8],{478:function(e,t,n){"use strict";n.d(t,"a",function(){return de}),n.d(t,"b",function(){return be});var i=n(26),o=n.n(i);function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function s(e,t){for(var n,i=0;i<t.length;i++)(n=t[i]).enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}function a(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function c(e){for(var t=1;t<arguments.length;t++){var n=null==arguments[t]?{}:arguments[t],i=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(i=i.concat(Object.getOwnPropertySymbols(n).filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),i.forEach(function(t){a(e,t,n[t])})}return e}function h(e){return function(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}var l=function(e,t){return e(t={exports:{}},t.exports),t.exports}(function(e){!function(){function t(){for(var e,i=[],o=0;o<arguments.length;o++)if(e=arguments[o]){var r=typeof e;if("string"===r||"number"===r)i.push(e);else if(Array.isArray(e)&&e.length){var s=t.apply(null,e);s&&i.push(s)}else if("object"===r)for(var a in e)n.call(e,a)&&e[a]&&i.push(a)}return i.join(" ")}var n={}.hasOwnProperty;e.exports?(t.default=t,e.exports=t):window.classNames=t}()}),u=function(e){return function(t,n){if(!t)return e;var i;"string"==typeof t?i=t:n=t;var o=e;return i&&(o+="__"+i),o+(n?Object.keys(n).reduce(function(e,t){var i=n[t];return i&&(e+=" "+("boolean"==typeof i?o+"--"+t:o+"--"+t+"_"+i)),e},""):"")}};function d(e,t,n){function i(){var h=Date.now()-a;h<t&&0<=h?o=setTimeout(i,t-h):(o=null,!n&&(c=e.apply(s,r),s=r=null))}var o,r,s,a,c;null==t&&(t=100);var h=function(){s=this,r=arguments,a=Date.now();var h=n&&!o;return o||(o=setTimeout(i,t)),h&&(c=e.apply(s,r),s=r=null),c};return h.clear=function(){o&&(clearTimeout(o),o=null)},h.flush=function(){o&&(c=e.apply(s,r),s=r=null,clearTimeout(o),o=null)},h}d.debounce=d;var p=d;function m(e,t){var n,i;return e&&t?(n="".concat(e).concat(t[0].toUpperCase()).concat(t.slice(1)),i="".concat(e,"-").concat(t)):(n=e||t,i=e||t),{name:n,classname:i}}function f(e){return/^data:/.test(e)||/^blob:/.test(e)}var g=function e(t,n,i){r(this,e),this.nativeEvent=t,this.directions=n,this.params=i},v=function e(t,n){r(this,e),this.nativeEvent=t,this.directions=n},w=function(){function e(t,n,i,o,s){r(this,e),this.nativeEvent=t,this.position=i,this.previousPosition=o,this.element=n,this.anchor=s}return function(e,t,n){t&&s(e.prototype,t),n&&s(e,n)}(e,[{key:"shift",value:function(){var e=this.element,t=this.anchor,n=this.position,i=e.getBoundingClientRect(),o=i.left,r=i.top;return{left:n.left-o-t.left,top:n.top-r-t.top}}}]),e}();const b={name:"DraggableElement",mixins:[{beforeMount:function(){window.addEventListener("mouseup",this.onMouseUp,{passive:!1}),window.addEventListener("mousemove",this.onMouseMove,{passive:!1}),window.addEventListener("touchmove",this.onTouchMove,{passive:!1}),window.addEventListener("touchend",this.onTouchEnd,{passive:!1})},beforeDestroy:function(){window.removeEventListener("mouseup",this.onMouseUp),window.removeEventListener("mousemove",this.onMouseMove),window.removeEventListener("touchmove",this.onTouchMove),window.removeEventListener("touchend",this.onTouchEnd)},mounted:function(){if(!this.$refs.draggable)throw new Error('You should add ref "draggable" to your root element to use draggable mixin');this.touches=[],this.draggingAnchor=[],this.hovered=!1},methods:{onMouseOver:function(){this.hovered||(this.hovered=!0,this.$emit("enter"))},onMouseLeave:function(){this.hovered&&(this.hovered=!1,this.$emit("leave"))},onTouchStart:function(e){e.cancelable&&(this.touches=h(e.touches),!this.hovered&&this.$emit("enter"),e.touches.length&&this.initAnchor(this.touches.reduce(function(t,n){return{clientX:t.clientX+n.clientX/e.touches.length,clientY:t.clientY+n.clientY/e.touches.length}},{clientX:0,clientY:0})),e.preventDefault&&e.preventDefault(),e.stopPropagation())},onTouchEnd:function(){this.processEnd()},onTouchMove:function(e){this.touches.length&&(this.processMove(e,e.touches),e.preventDefault&&e.preventDefault(),e.stopPropagation&&e.stopPropagation())},onMouseDown:function(e){var t={fake:!0,clientX:e.clientX,clientY:e.clientY};this.touches=[t],this.initAnchor(t),e.stopPropagation()},onMouseMove:function(e){this.touches.length&&(this.processMove(e,[{fake:!0,clientX:e.clientX,clientY:e.clientY}]),e.preventDefault&&e.preventDefault())},onMouseUp:function(){this.touches=[]},initAnchor:function(e){var t=this.$refs.draggable.getBoundingClientRect(),n=t.left,i=t.right,o=t.bottom,r=t.top;this.anchor={left:e.clientX-n,top:e.clientY-r,bottom:o-e.clientY,right:i-e.clientX}},processMove:function(e,t){var n=h(t);if(this.touches.length){if(1===this.touches.length&&1===n.length){var i=this.$refs.draggable;this.$emit("drag",new w(e,i,{left:n[0].clientX,top:n[0].clientY},{left:this.touches[0].clientX,top:this.touches[0].clientY},this.anchor))}this.touches=n}},processEnd:function(){this.touches=[],this.hovered&&(this.$emit("leave"),this.hovered=!1)}}}],props:{classname:{type:String}}};var y=function(){var e=this,t=e.$createElement;return(e._self._c||t)("div",{ref:"draggable",class:e.classname,on:{touchstart:e.onTouchStart,mousedown:e.onMouseDown,mouseover:e.onMouseOver,mouseleave:e.onMouseLeave}},[e._t("default")],2)};y._withStripped=!0;var x=function(e,t,n,i,o){const r=("function"==typeof n?n.options:n)||{};return r.__file="C:\\Live\\Projects\\Hot\\Vue Cropper\\vue-advanced-cropper-rollup\\src\\components\\service\\DraggableElement.vue",r.render||(r.render=e.render,r.staticRenderFns=e.staticRenderFns,r._compiled=!0,o&&(r.functional=!0)),r._scopeId=i,r}({render:y,staticRenderFns:[]},0,b,void 0,!1),S=u("vue-handler-wrapper");const C={name:"HandlerWrapper",components:{DraggableElement:x},props:{horizontalPosition:{type:String},verticalPosition:{type:String},classname:{type:String}},computed:{classnames:function(){var e;if(this.horizontalPosition||this.verticalPosition){var t=m(this.horizontalPosition,this.verticalPosition);e=l(this.classname,S(a({},t.classname,!0)))}else e=l(this.classname,S());return{default:e,draggable:S("draggable")}}}};var P=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{class:e.classnames.default},[n("DraggableElement",{class:e.classnames.draggable,on:{drag:function(t){return e.$emit("drag",t)},leave:function(){return e.$emit("leave")},enter:function(){return e.$emit("enter")}}},[e._t("default")],2)],1)};P._withStripped=!0;var R=function(e,t,n,i,o){const r=("function"==typeof n?n.options:n)||{};return r.__file="C:\\Live\\Projects\\Hot\\Vue Cropper\\vue-advanced-cropper-rollup\\src\\components\\service\\HandlerWrapper.vue",r.render||(r.render=e.render,r.staticRenderFns=e.staticRenderFns,r._compiled=!0,o&&(r.functional=!0)),r._scopeId=i,r}({render:P,staticRenderFns:[]},0,C,void 0,!1),z=u("vue-line-wrapper");const D={name:"LineWrapper",components:{DraggableElement:x},props:{position:{type:String,required:!0}},computed:{classname:function(){return z(a({},this.position,!0))}}};var _=function(){var e=this,t=e.$createElement;return(e._self._c||t)("DraggableElement",{class:e.classname,on:{drag:function(t){return e.$emit("drag",t)},leave:function(){return e.$emit("leave")},enter:function(){return e.$emit("enter")}}},[e._t("default")],2)};_._withStripped=!0;var F=function(e,t,n,i,o){const r=("function"==typeof n?n.options:n)||{};return r.__file="C:\\Live\\Projects\\Hot\\Vue Cropper\\vue-advanced-cropper-rollup\\src\\components\\service\\LineWrapper.vue",r.render||(r.render=e.render,r.staticRenderFns=e.staticRenderFns,r._compiled=!0,o&&(r.functional=!0)),r._scopeId=i,r}({render:_,staticRenderFns:[]},0,D,void 0,!1),E=u("vue-bounding-box"),M=["east","west",null],I=["south","north",null];const L={name:"BoundingBox",props:{classname:{type:String},handlers:{type:Object,default:function(){return{eastNorth:!0,north:!0,westNorth:!0,west:!0,westSouth:!0,south:!0,eastSouth:!0,east:!0}}},handlerComponent:{type:[Object,String]},handlersClassnames:{type:Object,default:function(){return{}}},lines:{type:Object,default:function(){return{west:!0,north:!0,east:!0,south:!0}}},lineComponent:{type:[Object,String]},linesClassnames:{type:Object,default:function(){return{}}}},data:function(){var e=[];return M.forEach(function(t){I.forEach(function(n){if(t!==n){var i=m(t,n),o=i.name,r=i.classname;e.push({name:o,classname:r,verticalDirection:n,horizontalDirection:t})}})}),{points:e}},computed:{classnames:function(){var e=this.handlersClassnames,t=this.linesClassnames;return{default:l(E(),this.classname),handlers:e,lines:t}},lineNodes:function(){var e=this,t=[];return this.points.forEach(function(n){n.horizontalDirection&&n.verticalDirection||!e.lines[n.name]||t.push({name:n.name,component:e.lineComponent,classname:l(e.classnames.lines.default,e.classnames.lines[n.name]),hoverClassname:e.classnames.lines.hover,verticalDirection:n.verticalDirection,horizontalDirection:n.horizontalDirection})}),t},handlerNodes:function(){var e=this,t=[];return this.points.forEach(function(n){e.handlers[n.name]&&t.push({name:n.name,component:e.handlerComponent,classname:l(e.classnames.handlers.default,e.classnames.handlers[n.name]),hoverClassname:e.classnames.handlers.hover,verticalDirection:n.verticalDirection,horizontalDirection:n.horizontalDirection})}),t}},beforeMount:function(){window.addEventListener("mouseup",this.onMouseUp,{passive:!1}),window.addEventListener("mousemove",this.onMouseMove,{passive:!1}),window.addEventListener("touchmove",this.onTouchMove,{passive:!1}),window.addEventListener("touchend",this.onTouchEnd,{passive:!1})},beforeDestroy:function(){window.removeEventListener("mouseup",this.onMouseUp),window.removeEventListener("mousemove",this.onMouseMove),window.removeEventListener("touchmove",this.onTouchMove),window.removeEventListener("touchend",this.onTouchEnd)},mounted:function(){this.touches=[],this.draggingAnchor=[]},methods:{onHandlerDrag:function(e,t,n){var i,o=e.shift(),r=o.left,s=o.top,a={left:0,right:0,top:0,bottom:0};"west"===t?a.left-=r:"east"==t&&(a.right+=r),"north"===n?a.top-=s:"south"==n&&(a.bottom+=s),!n&&t?i="width":n&&!t&&(i="height"),this.$emit("resize",new g(e.nativeEvent,a,{allowedDirections:{left:"west"===t||!t,right:"east"===t||!t,bottom:"south"===n||!n,top:"north"===n||!n},preserveAspectRatio:e.nativeEvent.shiftKey,respectDirection:i}))}}};var T=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{ref:"box",class:e.classnames.default},[e._t("default"),e._v(" "),n("div",e._l(e.lineNodes,function(t){return n(t.component,{key:t.name,tag:"component",attrs:{classname:t.classname,"hover-classname":t.hoverClassname,position:t.name},on:{drag:function(n){return e.onHandlerDrag(n,t.horizontalDirection,t.verticalDirection)}}})}),1),e._v(" "),n("div",e._l(e.handlerNodes,function(t){return n(t.component,{key:t.name,tag:"component",attrs:{classname:t.classname,"hover-classname":t.hoverClassname,"horizontal-position":t.horizontalDirection,"vertical-position":t.verticalDirection},on:{drag:function(n){return e.onHandlerDrag(n,t.horizontalDirection,t.verticalDirection)}}})}),1)],2)};T._withStripped=!0;var U=function(e,t,n,i,o){const r=("function"==typeof n?n.options:n)||{};return r.__file="C:\\Live\\Projects\\Hot\\Vue Cropper\\vue-advanced-cropper-rollup\\src\\components\\service\\BoundingBox.vue",r.render||(r.render=e.render,r.staticRenderFns=e.staticRenderFns,r._compiled=!0,o&&(r.functional=!0)),r._scopeId=i,r}({render:T,staticRenderFns:[]},0,L,void 0,!1),k=u("vue-draggable-area");const A={name:"DraggableArea",computed:{classnames:function(){return{default:l(k(),this.classname)}}},beforeMount:function(){window.addEventListener("mouseup",this.onMouseUp,{passive:!1}),window.addEventListener("mousemove",this.onMouseMove,{passive:!1}),window.addEventListener("touchmove",this.onTouchMove,{passive:!1}),window.addEventListener("touchend",this.onTouchEnd,{passive:!1})},beforeDestroy:function(){window.removeEventListener("mouseup",this.onMouseUp),window.removeEventListener("mousemove",this.onMouseMove),window.removeEventListener("touchmove",this.onTouchMove),window.removeEventListener("touchend",this.onTouchEnd)},mounted:function(){this.touches=[],this.draggingAnchor=[]},methods:{onTouchStart:function(e){e.cancelable&&(this.touches=h(e.touches),e.touches.length&&this.initAnchor(this.touches.reduce(function(t,n){return{clientX:t.clientX+n.clientX/e.touches.length,clientY:t.clientY+n.clientY/e.touches.length}},{clientX:0,clientY:0})),e.preventDefault&&e.preventDefault(),e.stopPropagation())},onTouchEnd:function(){this.processEnd()},onTouchMove:function(e){this.touches.length&&(this.processMove(e,e.touches),e.preventDefault&&e.preventDefault(),e.stopPropagation&&e.stopPropagation())},onMouseDown:function(e){var t={fake:!0,clientX:e.clientX,clientY:e.clientY};this.touches=[t],this.initAnchor(t),e.stopPropagation()},onMouseMove:function(e){this.touches.length&&(this.processMove(e,[{fake:!0,clientX:e.clientX,clientY:e.clientY}]),e.preventDefault&&e.cancelable&&e.preventDefault())},onMouseUp:function(){this.touches=[]},initAnchor:function(e){var t=this.$refs.container.getBoundingClientRect(),n=t.left,i=t.top;this.anchor={x:e.clientX-n,y:e.clientY-i}},processMove:function(e,t){var n=this,i=h(t);if(this.touches.length){var o=this.$refs.container.getBoundingClientRect(),r=o.left,s=o.top;if(1===this.touches.length&&1===i.length)this.$emit("move",new v(e,{left:i[0].clientX-r-this.anchor.x,top:i[0].clientY-s-this.anchor.y}));else if(1<this.touches.length&&this.touches.length===i.length){var a=i.map(function(e,t){var i=Math.pow;return{x:e.clientX-n.touches[t].clientX,y:e.clientY-n.touches[t].clientY,position:{clientX:e.clientX,clientY:e.clientY},length:Math.sqrt(i(e.clientX-n.touches[t].clientX,2)+i(e.clientY-n.touches[t].clientY,2))}}),c=a.reduce(function(e,t){return e+t.length},0),l={left:a.reduce(function(e,t,n){return e+(1-t.length/c)*i[n].clientX},0),top:a.reduce(function(e,t,n){return e+(1-t.length/c)*i[n].clientY},0)},u={top:0,bottom:0,left:0,right:0};a.forEach(function(e,t){.25<e.length/c&&(i[t].clientY>l.top?u.bottom+=e.y:u.top-=e.y,i[t].clientX>l.left?u.right+=e.x:u.left-=e.x)}),this.$emit("resize",new g(e,u))}this.touches=i}},processEnd:function(){this.touches=[]}}};var O=function(){var e=this,t=e.$createElement;return(e._self._c||t)("div",{ref:"container",on:{touchstart:e.onTouchStart,mousedown:e.onMouseDown}},[e._t("default")],2)};O._withStripped=!0;var H=function(e,t,n,i,o){const r=("function"==typeof n?n.options:n)||{};return r.__file="C:\\Live\\Projects\\Hot\\Vue Cropper\\vue-advanced-cropper-rollup\\src\\components\\service\\DraggableArea.vue",r.render||(r.render=e.render,r.staticRenderFns=e.staticRenderFns,r._compiled=!0,o&&(r.functional=!0)),r._scopeId=i,r}({render:O,staticRenderFns:[]},0,A,void 0,!1),W=["left","right"],j=["top","bottom"],B=["left","right","top","bottom"],$=4;function N(e){var t=e.rotate,n=e.scaleX,i=e.scaleY,o="";return(t||n||i)&&(t&&(o+=" rotate(".concat(t,"deg) ")),n&&(o+=" scaleX(".concat(n,") ")),i&&(o+=" scaleY(".concat(i,") "))),o}function G(e){return new Promise(function(t){(function(e){return new Promise(function(t,n){try{if(e)if(/^data:/i.test(e))t(function(e){e=e.replace(/^data:([^;]+);base64,/gim,"");for(var t=atob(e),n=t.length,i=new ArrayBuffer(n),o=new Uint8Array(i),r=0;r<n;r++)o[r]=t.charCodeAt(r);return i}(e));else if(/^blob:/i.test(e)){var i=new FileReader;i.onload=function(e){t(e.target.result)},function(e,t){var n=new XMLHttpRequest;n.open("GET",e,!0),n.responseType="blob",n.onload=function(){(200==this.status||0===this.status)&&t(this.response)},n.send()}(e,function(e){i.readAsArrayBuffer(e)})}else{var o=new XMLHttpRequest;o.onreadystatechange=function(){this.readyState!==$||(200===this.status||0===this.status?t(this.response):n("Warning: could not load an image to parse its orientation"),o=null)},o.onprogress=function(){"image/jpeg"!==o.getResponseHeader("content-type")&&o.abort()},o.withCredentials=!1,o.open("GET",e,!0),o.responseType="arraybuffer",o.send(null)}else n("Error: the image is empty")}catch(t){n(t)}})})(e).then(function(e){t(e?{arrayBuffer:e,orientation:X(e)}:{arrayBuffer:null,orientation:null})}).catch(function(e){console.warn(e),t({arrayBuffer:null,orientation:null})})})}function X(e){try{var t,n,i,o,r,s=new DataView(e);if(255===s.getUint8(0)&&216===s.getUint8(1))for(var a=s.byteLength,c=2;c+1<a;){if(255===s.getUint8(c)&&225===s.getUint8(c+1)){o=c;break}c++}if(o&&(n=o+10,"Exif"===function(e,t,n){var i,o="";for(i=t,n+=t;i<n;i++)o+=String.fromCharCode(e.getUint8(i));return o}(s,o+4,4))){var h=s.getUint16(n);if(((i=18761===h)||19789===h)&&42===s.getUint16(n+2,i)){var l=s.getUint32(n+4,i);8<=l&&(r=n+l)}}if(r)for(var u,d=s.getUint16(r,i),p=0;p<d;p++)if(u=r+12*p+2,274===s.getUint16(u,i)){u+=8,t=s.getUint16(u,i),s.setUint16(u,1,i);break}return t}catch(e){return null}}var Y=u("vue-preview-result");const V={name:"PreviewResult",props:{img:{type:Object},classname:{type:String},imageClassname:{type:String},resultCoordinates:{type:Object,default:function(){return{width:0,height:0,left:0,top:0}}},stencilCoordinates:{type:Object,default:function(){return{width:0,height:0,left:0,top:0}}}},computed:{classnames:function(){return{default:l(Y(),this.classname),image:l(Y("image"),this.imageClassname),wrapper:Y("wrapper")}},wrapperStyle:function(){return{width:"".concat(this.stencilCoordinates.width,"px"),height:"".concat(this.stencilCoordinates.height,"px"),left:"calc(50% - ".concat(this.stencilCoordinates.width/2,"px)"),top:"calc(50% - ".concat(this.stencilCoordinates.height/2,"px)")}},imageStyle:function(){var e=this.img.transforms,t=this.img.size.width,n=this.img.size.height,i=this.stencilCoordinates.height/this.resultCoordinates.height,o=n*i,r=t*i,s=e.flipped,a={width:"".concat(r,"px"),height:"".concat(o,"px")};return s?(a.width="".concat(o,"px"),a.height="".concat(r,"px"),a.left="".concat(-this.stencilCoordinates.left-(o-r)/2,"px"),a.top="".concat(-this.stencilCoordinates.top-(r-o)/2,"px")):(a.width="".concat(r,"px"),a.height="".concat(o,"px"),a.left="".concat(-this.stencilCoordinates.left,"px"),a.top="".concat(-this.stencilCoordinates.top,"px")),a.transform=N(e),a}}};var q=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{class:e.classnames.default},[n("div",{ref:"wrapper",class:e.classnames.wrapper,style:e.wrapperStyle},[n("img",{ref:"image",class:e.classnames.image,style:e.imageStyle,attrs:{src:e.img.src}})])])};q._withStripped=!0;var J=function(e,t,n,i,o){const r=("function"==typeof n?n.options:n)||{};return r.__file="C:\\Live\\Projects\\Hot\\Vue Cropper\\vue-advanced-cropper-rollup\\src\\components\\service\\PreviewResult.vue",r.render||(r.render=e.render,r.staticRenderFns=e.staticRenderFns,r._compiled=!0,o&&(r.functional=!0)),r._scopeId=i,r}({render:q,staticRenderFns:[]},0,V,void 0,!1),K=u("vue-square-handler");const Z={name:"SimpleHandler",components:{HandlerWrapper:R},props:{classname:{type:String},hoverClassname:{type:String},horizontalPosition:{type:String},verticalPosition:{type:String}},computed:{classnames:function(){return{default:l(K(a({},this.position,!0)),this.classname,this.hover&&this.hoverClassname)}}},methods:{onDrag:function(e){this.$emit("drag",e)},onEnter:function(){this.hover=!0},onLeave:function(){this.hover=!1}}};var Q=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("HandlerWrapper",{attrs:{"vertical-position":e.verticalPosition,"horizontal-position":e.horizontalPosition},on:{drag:e.onDrag}},[n("div",{class:e.classnames.default})])};Q._withStripped=!0;var ee=function(e,t,n,i,o){const r=("function"==typeof n?n.options:n)||{};return r.__file="C:\\Live\\Projects\\Hot\\Vue Cropper\\vue-advanced-cropper-rollup\\src\\components\\handlers\\SimpleHandler.vue",r.render||(r.render=e.render,r.staticRenderFns=e.staticRenderFns,r._compiled=!0,o&&(r.functional=!0)),r._scopeId=i,r}({render:Q,staticRenderFns:[]},0,Z,void 0,!1),te=u("vue-simple-line");const ne={name:"SimpleLine",components:{LineWrapper:F},props:{classname:{type:String},hoverClassname:{type:String},position:{type:String}},data:function(){return{hover:!1}},computed:{classnames:function(){return{default:l(te(a({},this.position,!0)),this.classname,this.hover&&this.hoverClassname)}}},methods:{onDrag:function(e){this.$emit("drag",e)},onEnter:function(){this.hover=!0},onLeave:function(){this.hover=!1}}};var ie=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("LineWrapper",{attrs:{position:e.position},on:{enter:e.onEnter,leave:e.onLeave,drag:e.onDrag}},[n("div",{class:e.classnames.default})])};ie._withStripped=!0;var oe=function(e,t,n,i,o){const r=("function"==typeof n?n.options:n)||{};return r.__file="C:\\Live\\Projects\\Hot\\Vue Cropper\\vue-advanced-cropper-rollup\\src\\components\\lines\\SimpleLine.vue",r.render||(r.render=e.render,r.staticRenderFns=e.staticRenderFns,r._compiled=!0,o&&(r.functional=!0)),r._scopeId=i,r}({render:ie,staticRenderFns:[]},0,ne,void 0,!1),re=u("vue-rectangle-stencil");const se={name:"RectangleStencil",components:{PreviewResult:J,BoundingBox:U,DraggableArea:H},props:{img:{type:Object},resultCoordinates:{type:Object},stencilCoordinates:{type:Object},handlers:{type:Object},handlerComponent:{type:[Object,String],default:function(){return ee}},handlersClassnames:{type:Object,default:function(){return{}}},lines:{type:Object},lineComponent:{type:[Object,String],default:function(){return oe}},linesClassnames:{type:Object,default:function(){return{}}},classname:{type:String},previewClassname:{type:String},boundingBoxClassname:{type:String},aspectRatio:{type:[Number,String]},minAspectRatio:{type:[Number,String]},maxAspectRatio:{type:[Number,String]}},computed:{classes:function(){return{stencil:l(re(),this.classname),preview:l(re("preview"),this.previewClassname),boundingBox:l(re("bounding-box"),this.boundingBoxClassname)}},style:function(){var e=this.stencilCoordinates,t=e.height,n=e.width,i=e.left,o=e.top;return{width:"".concat(n,"px"),height:"".concat(t,"px"),left:"".concat(i,"px"),top:"".concat(o,"px")}}},methods:{onMove:function(e){this.$emit("move",e)},onResize:function(e){this.$emit("resize",e)},aspectRatios:function(){return{minimum:this.aspectRatio||this.minAspectRatio,maximum:this.aspectRatio||this.maxAspectRatio}}}};var ae=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{class:e.classes.stencil,style:e.style},[n("BoundingBox",{attrs:{classname:e.classes.boundingBox,handlers:e.handlers,"handler-component":e.handlerComponent,"handlers-classnames":e.handlersClassnames,lines:e.lines,"line-component":e.lineComponent,"lines-classnames":e.linesClassnames},on:{resize:e.onResize}},[n("DraggableArea",{on:{move:e.onMove}},[n("PreviewResult",{attrs:{img:e.img,classname:e.classes.preview,"result-coordinates":e.resultCoordinates,"stencil-coordinates":e.stencilCoordinates}})],1)],1)],1)};ae._withStripped=!0;var ce=function(e,t,n,i,o){const r=("function"==typeof n?n.options:n)||{};return r.__file="C:\\Live\\Projects\\Hot\\Vue Cropper\\vue-advanced-cropper-rollup\\src\\components\\stencils\\RectangleStencil.vue",r.render||(r.render=e.render,r.staticRenderFns=e.staticRenderFns,r._compiled=!0,o&&(r.functional=!0)),r._scopeId=i,r}({render:ae,staticRenderFns:[]},0,se,void 0,!1),he=u("vue-circle-stencil");const le={name:"CircleStencil",components:{PreviewResult:J,BoundingBox:U,DraggableArea:H},props:{img:{type:Object},stencilClass:{type:String},resultCoordinates:{type:Object},stencilCoordinates:{type:Object},handlers:{type:Object,default:function(){return{eastNorth:!0,westNorth:!0,westSouth:!0,eastSouth:!0}}},handlerComponent:{type:[Object,String],default:function(){return ee}},handlersClassnames:{type:Object,default:function(){return{}}},lines:{type:Object},lineComponent:{type:[Object,String],default:function(){return oe}},linesClassnames:{type:Object,default:function(){return{}}},classname:{type:String},previewClassname:{type:String},boundingBoxClassname:{type:String}},computed:{classes:function(){return{stencil:l(he(),this.classname),preview:l(he("preview"),this.previewClassname),boundingBox:l(he("bounding-box"),this.boundingBox)}},style:function(){var e=this.stencilCoordinates,t=e.height,n=e.width,i=e.left,o=e.top;return{width:"".concat(n,"px"),height:"".concat(t,"px"),left:"".concat(i,"px"),top:"".concat(o,"px")}}},methods:{onMove:function(e){this.$emit("move",e)},onResize:function(e){this.$emit("resize",e)},aspectRatios:function(){return{minimum:1,maximum:1}}}};var ue=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{class:e.classes.stencil,style:e.style},[n("BoundingBox",{attrs:{classname:e.classes.boundingBox,handlers:e.handlers,"handler-component":e.handlerComponent,"handlers-classnames":e.handlersClassnames,lines:e.lines,"line-component":e.lineComponent,"lines-classnames":e.linesClassnames},on:{resize:e.onResize}},[n("DraggableArea",{on:{move:e.onMove}},[n("PreviewResult",{attrs:{img:e.img,classname:e.classes.preview,"result-coordinates":e.resultCoordinates,"stencil-coordinates":e.stencilCoordinates}})],1)],1)],1)};ue._withStripped=!0;var de=function(e,t,n,i,o){const r=("function"==typeof n?n.options:n)||{};return r.__file="C:\\Live\\Projects\\Hot\\Vue Cropper\\vue-advanced-cropper-rollup\\src\\components\\stencils\\CircleStencil.vue",r.render||(r.render=e.render,r.staticRenderFns=e.staticRenderFns,r._compiled=!0,o&&(r.functional=!0)),r._scopeId=i,r}({render:ue,staticRenderFns:[]},0,le,void 0,!1);function pe(e,t,n){return e.width+n*(t.left+t.right)}function me(e,t,n){return e.height+n*(t.top+t.bottom)}function fe(e,t,n,i,o,r){var s=Math.min,a=Math.abs,h=Math.floor,l=Math.ceil,u=n.minHeight,d=n.minWidth,p=n.maxHeight,m=n.maxWidth,f=c({},e),g=pe(t,f,i),v=me(t,f,i);0>g&&(0>f.left&&0>f.right?(f.left=-(t.width-d)/(f.left/f.right),f.right=-(t.width-d)/(f.right/f.left)):0>f.left?f.left=-(t.width-d)/i:0>f.right&&(f.right=-(t.width-d)/i)),0>v&&(0>f.top&&0>f.bottom?(f.top=-(t.height-u)/(f.top/f.bottom),f.bottom=-(t.height-u)/(f.bottom/f.top)):0>f.top?f.top=-(t.height-u):0>f.bottom&&(f.bottom=-(t.height-u)));var w,b={width:1/0,height:1/0};(f.right+f.left&&(l(t.left+t.width+i*f.right)>o.width&&(b.width=s(b.width,a(h(o.width-(t.left+t.width))/(i*f.right)))),0>t.left-i*f.left&&(b.width=s(b.width,a(t.left/(i*f.left)))),g<d&&(b.width=s(b.width,a((t.width-d)/((f.right+f.left)*i)))),g>m&&(b.width=s(b.width,a((m-t.width)/((f.right+f.left)*i))))),f.top+f.bottom&&(l(t.top+t.height+i*f.bottom)>o.height&&(b.height=s(b.height,a(h(o.height-(t.top+t.height))/(i*f.bottom)))),0>t.top-i*f.top&&(b.height=s(b.height,a(t.top/(i*f.top)))),v<u&&(b.height=s(b.height,a((t.height-u)/((f.top+f.bottom)*i)))),v>p&&(b.height=s(b.height,a((p-t.height)/((f.top+f.bottom)*i))))),r)?(b.height<b.width?w=b.height:f.right+f.left&&(w=b.width),(b.height!==1/0||b.width!==1/0)&&B.forEach(function(e){f[e]*=w})):(b.width!==1/0&&W.forEach(function(e){f[e]*=b.width}),b.height!==1/0&&j.forEach(function(e){f[e]*=b.height}));return f}var ge=u("vue-advanced-cropper");const ve={name:"Cropper",props:{src:{type:String,default:null},resizeAlgorithm:{type:Function,default:function(e,t,n,i,o,r){var s=c({},e,{right:e.left+e.width,bottom:e.top+e.height}),a=r.params||{},h=c({},r.directions),l=a.allowedDirections||{left:!0,right:!0,bottom:!0,top:!0};Object.keys(l).forEach(function(e){l[e]||(h[e]=0)});var u=pe(s,h,i),d=me(s,h,i);u=pe(s,h=fe(h,s,t,i,n),i),d=me(s,h,i);var p=null;if(a.preserveAspectRatio?p=s.width/s.height:o.minimum&&u/d<o.minimum?p=o.minimum:o.maximum&&u/d>o.maximum&&(p=o.maximum),p){var m=a.respectDirection;if(m||(m=s.width>s.height?"width":"height"),"width"===m){var f=s.height-u/p;l.top&&l.bottom?(h.bottom=-f/(2*i),h.top=-f/(2*i)):l.top?h.top=-f/i:l.bottom?h.bottom=-f/i:l.right?h.right=0:l.left&&(h.left=0)}else if("height"===m){var g=s.width-d*p;l.left&&l.right?(h.left=-g/(2*i),h.right=-g/(2*i)):l.left?h.left=-g/i:l.right?h.right=-g/i:l.top?h.top=0:l.bottom&&(h.bottom=0)}else B.forEach(function(e){h[e]*=0})}return h=fe(h,s,t,i,n,p),{width:e.width+i*(h.right+h.left),height:e.height+i*(h.top+h.bottom),left:e.left-i*h.left,top:e.top-i*h.top}}},moveAlgorithm:{type:Function,default:function(e,t,n,i){var o=Math.max,r=c({},i.directions),s={left:e.left+n*r.left,top:e.top+n*r.top,width:e.width,height:e.height};return 0>s.left&&(s.left=0),s.left+s.width>t.width&&(s.left=o(0,t.width-s.width)),0>s.top&&(s.top=0),s.top+s.height>t.height&&(s.top=o(0,t.height-s.height)),s}},defaultSize:{type:Function,default:function(e,t,n){var i,o,r=Math.max,s=n.maxWidth,a=n.maxHeight,c=n.minWidth,h=n.minHeight;return a>s?(i=r(h,.8*a),o=r(c,.8*s)):(o=r(c,.8*s),i=r(h,.8*a)),{height:i,width:o}}},defaultPosition:{type:Function,default:function(e,t,n,i,o,r){return{left:o/2-n/2,top:r/2-i/2}}},areaSize:{type:Function,default:function(e,t,n,i){var o=e.clientHeight,r=e.clientWidth,s=o,a=n*o/i;return a>r&&(a=r,s=i*r/n),{width:a,height:s}}},restrictions:{type:Function,default:function(e,t,n,i,o,r){return{minWidth:e/100*o,minHeight:t/100*r,maxWidth:n?n/100*o:o,maxHeight:i?i/100*r:r}}},minWidth:{type:[Number,String],default:10},minHeight:{type:[Number,String],default:10},maxWidth:{type:[Number,String]},maxHeight:{type:[Number,String]},stencilComponent:{type:[Object,String],default:function(){return ce}},stencilProps:{type:Object,default:function(){return{}}},classname:{type:String},imageClassname:{type:String},areaClassname:{type:String},backgroundClassname:{type:String},debounce:{type:Number,default:500},canvas:{type:Boolean,default:!0},checkCrossOrigin:{type:Boolean,default:!0},checkOrientation:{type:Boolean,default:!0},transitionTime:{type:Number,default:300}},data:function(){return{boundarySize:{width:null,height:null},imageLoaded:!1,imageAttributes:{crossOrigin:!1,src:null},imageTransforms:{rotate:null,scaleX:null,scaleY:null},imageSize:{width:null,height:null},coordinates:{left:0,top:0,width:0,height:0},frozenDirections:{width:!1,height:!1}}},computed:{coefficient:function(){return this.imageSize.width?this.imageSize.width/this.boundarySize.width:0},classes:function(){return{cropper:l(ge(),this.classname),image:l(ge("image"),this.imageClassname),area:l(ge("area"),this.areaClassname),stretcher:l(ge("stretcher")),background:l(ge("background"),this.backgroundClassname)}},stencilCoordinates:function(){var e=this.coordinates,t=e.width,n=e.height,i=e.left,o=e.top;return{width:t/this.coefficient,height:n/this.coefficient,left:i/this.coefficient,top:o/this.coefficient}},wrapperStyle:function(){return{width:"".concat(this.stencilCoordinates.width,"px"),height:"".concat(this.stencilCoordinates.height,"px"),left:"".concat(this.stencilCoordinates.left,"px"),top:"".concat(this.stencilCoordinates.top,"px")}},areaStyle:function(){return{width:this.boundarySize.width?"".concat(this.boundarySize.width,"px"):"auto",height:this.boundarySize.height?"".concat(this.boundarySize.height,"px"):"auto",opacity:this.imageLoaded?1:0,transition:"opacity ".concat(this.transitionTime,"ms")}},imageStyle:function(){var e={left:"50%",top:"50%",transform:"translate(-50%, -50%)"+N(this.imageTransforms)};return this.imageTransforms.flipped?(e.width="".concat(this.boundarySize.height,"px"),e.height="".concat(this.boundarySize.width,"px")):(e.width="".concat(this.boundarySize.width,"px"),e.height="".concat(this.boundarySize.height,"px")),e},stencilRestrictions:function(){var e=this.restrictions(+this.minWidth,+this.minHeight,+this.maxWidth,+this.maxHeight,this.imageSize.width,this.imageSize.height);return this.minWidth>this.imageSize.width&&(console.warn("Warning: minimum width (".concat(e.minWidth,"px) greater that the image width (").concat(this.imageSize.width,"px). It is set equal to the image width and width resizing was blocked")),e.minWidth=this.imageSize.width,e.widthFrozen=!0),this.minHeight>this.imageSize.height&&(console.warn("Warning: minimum height (".concat(e.minHeight,"px) greater that the image height (").concat(this.imageSize.height,"px). It is set equal to the image height and height resizing was blocked")),e.minHeight=this.imageSize.height,e.heightFrozen=!0),e.minWidth>e.maxWidth&&(console.warn("Warning: maximum width (".concat(e.maxWidth,"px) fewer that the minimum width (").concat(e.minWidth,"px). It is set equal to the minimum width and width resizing was blocked")),e.maxWidth=e.minWidth,e.widthFrozen=!0),e.minHeight>e.maxHeight&&(console.warn("Warning: maximum height (".concat(e.maxHeight,"px) fewer that the minimum height (").concat(e.minHeight,"px). It is set equal to the minimum height and height resizing was blocked")),e.maxHeight=e.minHeight,e.heightFrozen=!0),(!e.maxWidth||e.maxWidth>this.imageSize.width)&&(e.maxWidth=this.imageSize.width),(!e.maxHeight||e.maxHeight>this.imageSize.height)&&(e.maxHeight=this.imageSize.height),e}},watch:{src:function(){var e=this;o.a.nextTick(function(){e.onChangeImage()})},minWidth:function(){this.resetCoordinates()},maxWidth:function(){this.resetCoordinates()},minHeight:function(){this.resetCoordinates()},maxHeight:function(){this.resetCoordinates()}},mounted:function(){this.debouncedUpdate=p(this.update,this.debounce),this.src&&this.onChangeImage(),window.addEventListener("resize",this.refreshImage),window.addEventListener("orientationchange",this.refreshImage)},destroyed:function(){window.removeEventListener("resize",this.refreshImage),window.removeEventListener("orientationchange",this.refreshImage)},methods:{getResult:function(){return this.canvas?(this.updateCanvas(this.coordinates),{coordinates:c({},this.coordinates),canvas:this.$refs.canvas}):{coordinates:c({},this.coordinates)}},getArea:function(){return this.$refs.area},getStencil:function(){return this.$refs.stencil},updateCanvas:function(e){if(this.$refs.canvas){var t=this.$refs.image,n=this.checkOrientation?function(e,t,n){var i=Math.PI,o=n.flipped,r=n.orientation,s=t.naturalWidth,a=t.naturalHeight,c=e.getContext("2d");return e.width=s,e.height=a,c.save(),o&&(e.width=a,e.height=s),2==r?(c.translate(s,0),c.scale(-1,1)):3==r?(c.translate(s,a),c.rotate(1*i)):4==r?(c.translate(0,a),c.scale(1,-1)):5==r?(c.rotate(.5*i),c.scale(1,-1)):6==r?(c.rotate(.5*i),c.translate(0,-a)):7==r?(c.rotate(1.5*i),c.translate(-s,a),c.scale(1,-1)):8==r&&(c.translate(0,s),c.rotate(1.5*i)),c.drawImage(t,0,0,s,a),c.restore(),e}(this.$refs.sourceCanvas,t,this.imageTransforms):t,i=this.$refs.canvas;i.width=e.width,i.height=e.height,i.getContext("2d").drawImage(n,e.left,e.top,e.width,e.height,0,0,e.width,e.height)}},update:function(){this.$emit("change",this.getResult())},onChangeCoordinates:function(e){var t=!(1<arguments.length&&void 0!==arguments[1])||arguments[1];this.coordinates=e,this.$listeners&&this.$listeners.change&&(t?this.debouncedUpdate():this.update())},onChangeImage:function(){var e=this;this.imageLoaded=!1;var t=function(e){if(f(e))return!1;var t=window.location,n=/(\w+:)?(?:\/\/)([\w.-]+)?(?::(\d+))?\/?/.exec(e)||[],i={protocol:n[1]||"",host:n[2]||"",port:n[3]||""},o=function(e){return e.port||function(e){return{"http:":80,"https:":443}[e]}(e.protocol||t.protocol)};return(i.protocol||i.host||i.port)&&!(i.protocol&&i.protocol==t.protocol&&i.host&&i.host==t.host&&i.host&&o(i)==o(t))}(this.src);t&&this.canvas&&this.checkCrossOrigin&&(this.imageAttributes.crossOrigin="anonymous"),setTimeout(function(){e.checkOrientation?G(t?function(e){var t="timestamp=".concat((new Date).getTime());return e+(-1===e.indexOf("?")?"?":"&")+t}(e.src):e.src).then(e.onParseImage):e.onParseImage({})},this.transitionTime)},onParseImage:function(e){var t=this,n=e.arrayBuffer,i=e.orientation;this.imageAttributes.src=n&&i&&f(this.src)?function(e){for(var t=[],n=new Uint8Array(e);0<n.length;){var i=n.subarray(0,8192);t.push(String.fromCharCode.apply(null,Array.from?Array.from(i):Array.slice(i))),n=n.subarray(8192)}return"data:image/jpeg;base64,".concat(btoa(t.join("")))}(n):this.src,this.imageTransforms=function(e){var t={orientation:e};return e&&(2===e?t.scaleX=-1:3===e?t.rotate=-180:4===e?t.scaleY=-1:5===e?(t.rotate=90,t.scaleY=-1):6===e?t.rotate=90:7===e?(t.rotate=90,t.scaleX=-1):8===e&&(t.rotate=-90)),(90===t.rotate||-90===t.rotate)&&(t.flipped=!0),t}(i),o.a.nextTick(function(){var e=t.$refs.image;e&&(e.complete?t.refreshImage().then(t.resetCoordinates):e.addEventListener("load",function(){t.$refs.image&&t.refreshImage().then(t.resetCoordinates)}))})},onResize:function(e){this.frozenDirections.width&&(e.directions.left=0,e.directions.right=0),this.frozenDirections.height&&(e.directions.top=0,e.directions.bottom=0),this.onChangeCoordinates(this.resizeAlgorithm(this.coordinates,this.stencilRestrictions,this.imageSize,this.coefficient,this.stencilAspectRatios(),e))},onMove:function(e){this.onChangeCoordinates(this.moveAlgorithm(this.coordinates,this.imageSize,this.coefficient,e))},defaultCoordinates:function(){var e=Math.max,t=Math.min,n=this.stencilAspectRatios(),i=this.stencilRestrictions,o=i.minWidth,r=i.minHeight,s=i.maxWidth,a=i.maxHeight,c=this.imageSize,h={};if(n.minimum||n.maximum){var l={width:{maximum:n.minimum?t(a,o/n.minimum):a,minimum:n.maximum?e(r,o/n.maximum):r},height:{maximum:n.maximum?t(s,r*n.maximum):s,minimum:n.mininum?e(o,r*n.mininum):o}};if(l.width.maximum>=l.width.minimum)h.width=o,h.height=l.width.minimum;else{if(!(l.height.maximum>=l.height.minimum))throw"Error: current aspect ratio can't is incompatible with minimum/maximum height and width settings. Can't setup default coordinates";h.height=r,h.width=l.height.minimum}}else h.height=r,h.width=o;return h.left=c.width/2-h.width/2,h.top=c.height/2-h.height/2,h},setCoordinates:function(e){var t=this,n=this.imageSize,i=this.coefficient,o=this.stencilAspectRatios(),r=function(e,o){return t.moveAlgorithm(e,n,i,new v(null,{left:(o.left-e.left)/i,top:(o.top-e.top)/i}))},s=function(e,s){var a=t.defaultCoordinates();return a=t.resizeAlgorithm(a,t.stencilRestrictions,n,i,o,new g(null,{left:(s.width-a.width)/(2*i),right:(s.width-a.width)/(2*i),top:(s.height-a.height)/(2*i),bottom:(s.height-a.height)/(2*i)})),r(a,{left:e.left,top:e.top})},a=this.coordinates;return e.forEach||(e=[e]),e.forEach(function(e){var n;((n="function"==typeof e?e(c({},a),t.imageSize):e).width||n.height)&&(a=s(a,c({},a,n))),(n.left||n.top)&&(a=r(a,c({},a,n)))}),this.onChangeCoordinates(a,!1),a},resetCoordinates:function(){var e=this;if(this.$refs.image){var t=this.$refs.cropper,n=this.$refs.image,i=this.stencilRestrictions,o=i.minWidth,r=i.minHeight,s=i.maxWidth,a=i.maxHeight,h=i.widthFrozen,l=i.heightFrozen;this.frozenDirections.width=!!h,this.frozenDirections.height=!!l;var u=this.defaultSize(t,n,this.stencilRestrictions,this.$props);(u.width<o||u.height<r||u.width>s||u.height>a)&&console.warn("Warning: default size breaking size restrictions. Check your defaultSize function"),this.setCoordinates([u,function(i){return c({},e.defaultPosition(t,n,i.width,i.height,e.imageSize.width,e.imageSize.height,e.$props))}]),this.imageLoaded=!0}},refreshImage:function(){var e=this,t=this.$refs.image,n=this.$refs.stretcher;this.imageTransforms.flipped?(this.imageSize.height=t.naturalWidth,this.imageSize.width=t.naturalHeight):(this.imageSize.height=t.naturalHeight,this.imageSize.width=t.naturalWidth);var i=this.imageSize.width/this.imageSize.height;return this.imageSize.height>this.imageSize.width?(n.style.height="".concat(this.imageSize.height,"px"),n.style.width="".concat(n.clientHeight*i,"px"),n.clientWidth/n.clientHeight!=i&&(n.style.height="".concat(n.clientWidth/i,"px"))):(n.style.width="".concat(this.imageSize.width,"px"),n.style.height="".concat(n.clientWidth/i,"px"),n.clientHeight/n.clientWidth!=i&&(n.style.width="".concat(n.clientHeight*i,"px"))),new Promise(function(t){var n=e.$refs.cropper,i=e.$refs.image;o.a.nextTick(function(){var o=e.areaSize(n,i,e.imageSize.width,e.imageSize.height),r=o.height,s=o.width;r&&(e.boundarySize.height=r),s&&(e.boundarySize.width=s),t()})})},stencilAspectRatios:function(){return this.$refs.stencil.aspectRatios?this.$refs.stencil.aspectRatios():{minimum:this.stencilProps.aspectRatio||this.stencilProps.minAspectRatio,maximum:this.stencilProps.aspectRatio||this.stencilProps.maxAspectRatio}}}};var we=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{ref:"cropper",class:e.classes.cropper},[n("div",{class:e.classes.background,style:e.areaStyle}),e._v(" "),n("div",{ref:"stretcher",class:e.classes.stretcher}),e._v(" "),n("div",{ref:"area",class:e.classes.area,style:e.areaStyle},[n("img",{ref:"image",class:e.classes.image,style:e.imageStyle,attrs:{crossOrigin:e.imageAttributes.crossOrigin,src:e.imageAttributes.src}}),e._v(" "),n(e.stencilComponent,e._b({ref:"stencil",tag:"component",attrs:{img:{src:e.imageAttributes.src,size:e.imageSize,transforms:e.imageTransforms},"result-coordinates":e.coordinates,"stencil-coordinates":e.stencilCoordinates},on:{resize:e.onResize,move:e.onMove}},"component",e.stencilProps,!1)),e._v(" "),e.canvas?n("canvas",{ref:"canvas",style:{display:"none"}}):e._e(),e._v(" "),e.canvas?n("canvas",{ref:"sourceCanvas",style:{display:"none"}}):e._e()],1)])};we._withStripped=!0;var be=function(e,t,n,i,o){const r=("function"==typeof n?n.options:n)||{};return r.__file="C:\\Live\\Projects\\Hot\\Vue Cropper\\vue-advanced-cropper-rollup\\src\\Cropper.vue",r.render||(r.render=e.render,r.staticRenderFns=e.staticRenderFns,r._compiled=!0,o&&(r.functional=!0)),r._scopeId=i,r}({render:we,staticRenderFns:[]},0,ve,void 0,!1),ye=u("vue-preview-image");const xe={name:"PreviewImage",props:{img:{type:String},classname:{type:String},imageClassname:{type:String},width:{type:Number},height:{type:Number},top:{type:Number},left:{type:Number},previewWidth:{type:Number,required:!0},previewHeight:{type:Number,required:!0}},data:function(){return{imageSize:{width:0,height:0}}},computed:{classnames:function(){return{default:l(ye(),this.classname),image:l(ye("image"),this.imageClassname)}},wrapperStyle:function(){return{width:"".concat(this.previewWidth,"px"),height:"".concat(this.previewHeight,"px")}},imageStyle:function(){var e=this.previewHeight/this.height,t=this.imageSize.height*e,n=this.imageSize.width*e;return{width:"".concat(n,"px"),height:"".concat(t,"px"),left:"".concat(-this.left*e,"px"),top:"".concat(-this.top*e,"px")}}},watch:{img:function(){this.onChangeImage()}},mounted:function(){this.onChangeImage()},methods:{refreshImage:function(){var e=this.$refs.image;this.imageSize.height=e.naturalHeight,this.imageSize.width=e.naturalWidth},onChangeImage:function(){var e=this,t=this.$refs.image;t.complete?this.refreshImage():t.addEventListener("load",function(){e.refreshImage()})}}};var Se=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{class:e.classnames.default,style:e.wrapperStyle},[n("img",{ref:"image",class:e.classnames.image,style:e.imageStyle,attrs:{src:e.img}})])};Se._withStripped=!0;!function(e,t,n,i,o){const r=("function"==typeof n?n.options:n)||{};r.__file="C:\\Live\\Projects\\Hot\\Vue Cropper\\vue-advanced-cropper-rollup\\src\\components\\helpers\\PreviewImage.vue",r.render||(r.render=e.render,r.staticRenderFns=e.staticRenderFns,r._compiled=!0,o&&(r.functional=!0)),r._scopeId=i}({render:Se,staticRenderFns:[]},0,xe,void 0,!1);o.a.component("cropper",be),o.a.component("rectangle-stencil",ce),o.a.component("circle-stencil",de),o.a.component("simple-handler",ee),o.a.component("simple-line",oe),function(e,t){if(t&&"undefined"!=typeof document){for(var n,i=document.head||document.getElementsByTagName("head")[0],o=i.getElementsByTagName("style"),r=0;r<o.length;r++)o[r].innerText.startsWith("/*for="+e)&&(n=o[r]);if(n||((n=document.createElement("style")).type="text/css",i.insertBefore(n,o[0]||i.firstChild)),n.styleSheet)n.styleSheet.cssText=t;else{var s=document.createTextNode("/*for="+e+"*/"+t);n.innerHTML="",n.appendChild(s)}}}("vue-advanced-cropper",".vue-advanced-cropper {  text-align: center;  position: relative;  overflow: hidden;  -webkit-user-select: none;     -moz-user-select: none;      -ms-user-select: none;          user-select: none;  max-height: 100%;  max-width: 100%;}.vue-advanced-cropper__stretcher {    pointer-events: none;    position: relative;    max-width: 100%;    max-height: 100%;}.vue-advanced-cropper__image {    opacity: 0.5;    -webkit-user-select: none;       -moz-user-select: none;        -ms-user-select: none;            user-select: none;    position: absolute;    -webkit-transform-origin: center;            transform-origin: center;    max-width: unset !important;}.vue-advanced-cropper__area {    position: absolute;    left: 50%;    -webkit-transform: translate(-50%, -50%);            transform: translate(-50%, -50%);    top: 50%;}.vue-advanced-cropper__background {    position: absolute;    background: black;    top: 50%;    left: 50%;    -webkit-transform: translate(-50%, -50%);            transform: translate(-50%, -50%);}.vue-advanced-cropper__stencil-wrapper {    position: absolute;}/*# sourceMappingURL=Cropper.vue.map */.vue-rectangle-stencil {  position: absolute;  height: 100%;  width: 100%;  -webkit-box-sizing: border-box;          box-sizing: border-box;  cursor: move;}/*# sourceMappingURL=RectangleStencil.vue.map */.vue-circle-stencil {  position: absolute;  height: 100%;  width: 100%;  -webkit-box-sizing: content-box;          box-sizing: content-box;  cursor: move;}.vue-circle-stencil__preview {    border-radius: 50%;}/*# sourceMappingURL=CircleStencil.vue.map */.vue-square-handler {  display: block;  background: white;  height: 10px;  width: 10px;}/*# sourceMappingURL=SimpleHandler.vue.map */.vue-line-wrapper {  background: none;  position: absolute;  display: -webkit-box;  display: -ms-flexbox;  display: flex;  -webkit-box-align: center;      -ms-flex-align: center;          align-items: center;  -webkit-box-pack: center;      -ms-flex-pack: center;          justify-content: center;}.vue-line-wrapper--north, .vue-line-wrapper--south {    height: 12px;    width: 100%;    left: 0;    -webkit-transform: translateY(-50%);            transform: translateY(-50%);}.vue-line-wrapper--north {    top: 0;    cursor: n-resize;}.vue-line-wrapper--south {    top: 100%;    cursor: s-resize;}.vue-line-wrapper--east, .vue-line-wrapper--west {    width: 12px;    height: 100%;    -webkit-transform: translateX(-50%);            transform: translateX(-50%);    top: 0;}.vue-line-wrapper--east {    left: 100%;    cursor: e-resize;}.vue-line-wrapper--west {    left: 0;    cursor: w-resize;}/*# sourceMappingURL=LineWrapper.vue.map */.vue-preview-result {  overflow: hidden;  -webkit-box-sizing: border-box;          box-sizing: border-box;  position: absolute;  height: 100%;  width: 100%;}.vue-preview-result__wrapper {    position: absolute;}.vue-preview-result__image {    pointer-events: none;    position: absolute;    -webkit-user-select: none;       -moz-user-select: none;        -ms-user-select: none;            user-select: none;    -webkit-transform-origin: center;            transform-origin: center;    max-width: unset !important;}/*# sourceMappingURL=PreviewResult.vue.map */.vue-handler-wrapper {  position: absolute;  -webkit-transform: translate(-50%, -50%);          transform: translate(-50%, -50%);}.vue-handler-wrapper__draggable {    width: 30px;    height: 30px;    display: -webkit-box;    display: -ms-flexbox;    display: flex;    -webkit-box-align: center;        -ms-flex-align: center;            align-items: center;    -webkit-box-pack: center;        -ms-flex-pack: center;            justify-content: center;}.vue-handler-wrapper--west-north {    left: 0;    top: 0;    cursor: nw-resize;}.vue-handler-wrapper--north {    left: 50%;    top: 0;    cursor: n-resize;}.vue-handler-wrapper--east-north {    left: 100%;    top: 0;    cursor: ne-resize;}.vue-handler-wrapper--east {    left: 100%;    top: 50%;    cursor: e-resize;}.vue-handler-wrapper--east-south {    left: 100%;    top: 100%;    cursor: se-resize;}.vue-handler-wrapper--south {    left: 50%;    top: 100%;    cursor: s-resize;}.vue-handler-wrapper--west-south {    left: 0;    top: 100%;    cursor: sw-resize;}.vue-handler-wrapper--west {    left: 0;    top: 50%;    cursor: w-resize;}/*# sourceMappingURL=HandlerWrapper.vue.map */.vue-preview-image {  overflow: hidden;  position: relative;}.vue-preview-image__image {    pointer-events: none;    position: absolute;    max-width: unset !important;}/*# sourceMappingURL=PreviewImage.vue.map */.vue-bounding-box {  position: relative;  height: 100%;  width: 100%;}.vue-bounding-box__line {    position: absolute;}.vue-bounding-box__line--north {      top: 0;      width: 100%;      cursor: n-resize;}.vue-bounding-box__line--east {      left: 100%;      top: 0;      height: 100%;      cursor: e-resize;}.vue-bounding-box__line--south {      top: 100%;      width: 100%;      cursor: s-resize;}.vue-bounding-box__line--west {      left: 0;      top: 0;      height: 100%;      cursor: w-resize;}/*# sourceMappingURL=BoundingBox.vue.map */.vue-draggable-area {  position: relative;}/*# sourceMappingURL=DraggableArea.vue.map */.vue-simple-line {  background: none;  -webkit-transition: border 0.5s;  transition: border 0.5s;  border-color: rgba(255, 255, 255, 0.3);  border-width: 0;  border-style: solid;}.vue-simple-line--south, .vue-simple-line--north {    height: 0;    width: 100%;}.vue-simple-line--east, .vue-simple-line--west {    height: 100%;    width: 0;}.vue-simple-line--east {    border-right-width: 1px;}.vue-simple-line--west {    border-left-width: 1px;}.vue-simple-line--south {    border-top-width: 1px;}.vue-simple-line--north {    border-bottom-width: 1px;}.vue-simple-line--hover {    opacity: 1;    border-color: white;}/*# sourceMappingURL=SimpleLine.vue.map */")},479:function(e,t,i){var o;(function(){var i=!1,r=function(e){return e instanceof r?e:this instanceof r?void(this.EXIFwrapped=e):new r(e)};e.exports&&(t=e.exports=r),t.EXIF=r;var s=r.Tags={36864:"ExifVersion",40960:"FlashpixVersion",40961:"ColorSpace",40962:"PixelXDimension",40963:"PixelYDimension",37121:"ComponentsConfiguration",37122:"CompressedBitsPerPixel",37500:"MakerNote",37510:"UserComment",40964:"RelatedSoundFile",36867:"DateTimeOriginal",36868:"DateTimeDigitized",37520:"SubsecTime",37521:"SubsecTimeOriginal",37522:"SubsecTimeDigitized",33434:"ExposureTime",33437:"FNumber",34850:"ExposureProgram",34852:"SpectralSensitivity",34855:"ISOSpeedRatings",34856:"OECF",37377:"ShutterSpeedValue",37378:"ApertureValue",37379:"BrightnessValue",37380:"ExposureBias",37381:"MaxApertureValue",37382:"SubjectDistance",37383:"MeteringMode",37384:"LightSource",37385:"Flash",37396:"SubjectArea",37386:"FocalLength",41483:"FlashEnergy",41484:"SpatialFrequencyResponse",41486:"FocalPlaneXResolution",41487:"FocalPlaneYResolution",41488:"FocalPlaneResolutionUnit",41492:"SubjectLocation",41493:"ExposureIndex",41495:"SensingMethod",41728:"FileSource",41729:"SceneType",41730:"CFAPattern",41985:"CustomRendered",41986:"ExposureMode",41987:"WhiteBalance",41988:"DigitalZoomRation",41989:"FocalLengthIn35mmFilm",41990:"SceneCaptureType",41991:"GainControl",41992:"Contrast",41993:"Saturation",41994:"Sharpness",41995:"DeviceSettingDescription",41996:"SubjectDistanceRange",40965:"InteroperabilityIFDPointer",42016:"ImageUniqueID"},a=r.TiffTags={256:"ImageWidth",257:"ImageHeight",34665:"ExifIFDPointer",34853:"GPSInfoIFDPointer",40965:"InteroperabilityIFDPointer",258:"BitsPerSample",259:"Compression",262:"PhotometricInterpretation",274:"Orientation",277:"SamplesPerPixel",284:"PlanarConfiguration",530:"YCbCrSubSampling",531:"YCbCrPositioning",282:"XResolution",283:"YResolution",296:"ResolutionUnit",273:"StripOffsets",278:"RowsPerStrip",279:"StripByteCounts",513:"JPEGInterchangeFormat",514:"JPEGInterchangeFormatLength",301:"TransferFunction",318:"WhitePoint",319:"PrimaryChromaticities",529:"YCbCrCoefficients",532:"ReferenceBlackWhite",306:"DateTime",270:"ImageDescription",271:"Make",272:"Model",305:"Software",315:"Artist",33432:"Copyright"},c=r.GPSTags={0:"GPSVersionID",1:"GPSLatitudeRef",2:"GPSLatitude",3:"GPSLongitudeRef",4:"GPSLongitude",5:"GPSAltitudeRef",6:"GPSAltitude",7:"GPSTimeStamp",8:"GPSSatellites",9:"GPSStatus",10:"GPSMeasureMode",11:"GPSDOP",12:"GPSSpeedRef",13:"GPSSpeed",14:"GPSTrackRef",15:"GPSTrack",16:"GPSImgDirectionRef",17:"GPSImgDirection",18:"GPSMapDatum",19:"GPSDestLatitudeRef",20:"GPSDestLatitude",21:"GPSDestLongitudeRef",22:"GPSDestLongitude",23:"GPSDestBearingRef",24:"GPSDestBearing",25:"GPSDestDistanceRef",26:"GPSDestDistance",27:"GPSProcessingMethod",28:"GPSAreaInformation",29:"GPSDateStamp",30:"GPSDifferential"},h=r.IFD1Tags={256:"ImageWidth",257:"ImageHeight",258:"BitsPerSample",259:"Compression",262:"PhotometricInterpretation",273:"StripOffsets",274:"Orientation",277:"SamplesPerPixel",278:"RowsPerStrip",279:"StripByteCounts",282:"XResolution",283:"YResolution",284:"PlanarConfiguration",296:"ResolutionUnit",513:"JpegIFOffset",514:"JpegIFByteCount",529:"YCbCrCoefficients",530:"YCbCrSubSampling",531:"YCbCrPositioning",532:"ReferenceBlackWhite"},l=r.StringValues={ExposureProgram:{0:"Not defined",1:"Manual",2:"Normal program",3:"Aperture priority",4:"Shutter priority",5:"Creative program",6:"Action program",7:"Portrait mode",8:"Landscape mode"},MeteringMode:{0:"Unknown",1:"Average",2:"CenterWeightedAverage",3:"Spot",4:"MultiSpot",5:"Pattern",6:"Partial",255:"Other"},LightSource:{0:"Unknown",1:"Daylight",2:"Fluorescent",3:"Tungsten (incandescent light)",4:"Flash",9:"Fine weather",10:"Cloudy weather",11:"Shade",12:"Daylight fluorescent (D 5700 - 7100K)",13:"Day white fluorescent (N 4600 - 5400K)",14:"Cool white fluorescent (W 3900 - 4500K)",15:"White fluorescent (WW 3200 - 3700K)",17:"Standard light A",18:"Standard light B",19:"Standard light C",20:"D55",21:"D65",22:"D75",23:"D50",24:"ISO studio tungsten",255:"Other"},Flash:{0:"Flash did not fire",1:"Flash fired",5:"Strobe return light not detected",7:"Strobe return light detected",9:"Flash fired, compulsory flash mode",13:"Flash fired, compulsory flash mode, return light not detected",15:"Flash fired, compulsory flash mode, return light detected",16:"Flash did not fire, compulsory flash mode",24:"Flash did not fire, auto mode",25:"Flash fired, auto mode",29:"Flash fired, auto mode, return light not detected",31:"Flash fired, auto mode, return light detected",32:"No flash function",65:"Flash fired, red-eye reduction mode",69:"Flash fired, red-eye reduction mode, return light not detected",71:"Flash fired, red-eye reduction mode, return light detected",73:"Flash fired, compulsory flash mode, red-eye reduction mode",77:"Flash fired, compulsory flash mode, red-eye reduction mode, return light not detected",79:"Flash fired, compulsory flash mode, red-eye reduction mode, return light detected",89:"Flash fired, auto mode, red-eye reduction mode",93:"Flash fired, auto mode, return light not detected, red-eye reduction mode",95:"Flash fired, auto mode, return light detected, red-eye reduction mode"},SensingMethod:{1:"Not defined",2:"One-chip color area sensor",3:"Two-chip color area sensor",4:"Three-chip color area sensor",5:"Color sequential area sensor",7:"Trilinear sensor",8:"Color sequential linear sensor"},SceneCaptureType:{0:"Standard",1:"Landscape",2:"Portrait",3:"Night scene"},SceneType:{1:"Directly photographed"},CustomRendered:{0:"Normal process",1:"Custom process"},WhiteBalance:{0:"Auto white balance",1:"Manual white balance"},GainControl:{0:"None",1:"Low gain up",2:"High gain up",3:"Low gain down",4:"High gain down"},Contrast:{0:"Normal",1:"Soft",2:"Hard"},Saturation:{0:"Normal",1:"Low saturation",2:"High saturation"},Sharpness:{0:"Normal",1:"Soft",2:"Hard"},SubjectDistanceRange:{0:"Unknown",1:"Macro",2:"Close view",3:"Distant view"},FileSource:{3:"DSC"},Components:{0:"",1:"Y",2:"Cb",3:"Cr",4:"R",5:"G",6:"B"}};function u(e){return!!e.exifdata}function d(e,t){function n(n){var o=p(n);e.exifdata=o||{};var s=function(e){var t=new DataView(e);i&&console.log("Got file of length "+e.byteLength);if(255!=t.getUint8(0)||216!=t.getUint8(1))return i&&console.log("Not a valid JPEG"),!1;var n=2,o=e.byteLength,r=function(e,t){return 56===e.getUint8(t)&&66===e.getUint8(t+1)&&73===e.getUint8(t+2)&&77===e.getUint8(t+3)&&4===e.getUint8(t+4)&&4===e.getUint8(t+5)};for(;n<o;){if(r(t,n)){var s=t.getUint8(n+7);s%2!=0&&(s+=1),0===s&&(s=4);var a=n+8+s,c=t.getUint16(n+6+s);return f(e,a,c)}n++}}(n);if(e.iptcdata=s||{},r.isXmpEnabled){var a=function(e){if(!("DOMParser"in self))return;var t=new DataView(e);i&&console.log("Got file of length "+e.byteLength);if(255!=t.getUint8(0)||216!=t.getUint8(1))return i&&console.log("Not a valid JPEG"),!1;var n=2,o=e.byteLength,r=new DOMParser;for(;n<o-4;){if("http"==w(t,n,4)){var s=n-1,a=t.getUint16(n-2)-1,c=w(t,s,a),h=c.indexOf("xmpmeta>")+8,l=(c=c.substring(c.indexOf("<x:xmpmeta"),h)).indexOf("x:xmpmeta")+10;return c=c.slice(0,l)+'xmlns:Iptc4xmpCore="http://iptc.org/std/Iptc4xmpCore/1.0/xmlns/" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:tiff="http://ns.adobe.com/tiff/1.0/" xmlns:plus="http://schemas.android.com/apk/lib/com.google.android.gms.plus" xmlns:ext="http://www.gettyimages.com/xsltExtension/1.0" xmlns:exif="http://ns.adobe.com/exif/1.0/" xmlns:stEvt="http://ns.adobe.com/xap/1.0/sType/ResourceEvent#" xmlns:stRef="http://ns.adobe.com/xap/1.0/sType/ResourceRef#" xmlns:crs="http://ns.adobe.com/camera-raw-settings/1.0/" xmlns:xapGImg="http://ns.adobe.com/xap/1.0/g/img/" xmlns:Iptc4xmpExt="http://iptc.org/std/Iptc4xmpExt/2008-02-29/" '+c.slice(l),x(r.parseFromString(c,"text/xml"))}n++}}(n);e.xmpdata=a||{}}t&&t.call(e)}if(e.src)if(/^data\:/i.test(e.src))n(function(e,t){t=t||e.match(/^data\:([^\;]+)\;base64,/im)[1]||"",e=e.replace(/^data\:([^\;]+)\;base64,/gim,"");for(var n=atob(e),i=n.length,o=new ArrayBuffer(i),r=new Uint8Array(o),s=0;s<i;s++)r[s]=n.charCodeAt(s);return o}(e.src));else if(/^blob\:/i.test(e.src)){(s=new FileReader).onload=function(e){n(e.target.result)},function(e,t){var n=new XMLHttpRequest;n.open("GET",e,!0),n.responseType="blob",n.onload=function(e){200!=this.status&&0!==this.status||t(this.response)},n.send()}(e.src,function(e){s.readAsArrayBuffer(e)})}else{var o=new XMLHttpRequest;o.onload=function(){if(200!=this.status&&0!==this.status)throw"Could not load image";n(o.response),o=null},o.open("GET",e.src,!0),o.responseType="arraybuffer",o.send(null)}else if(self.FileReader&&(e instanceof self.Blob||e instanceof self.File)){var s;(s=new FileReader).onload=function(e){i&&console.log("Got file of length "+e.target.result.byteLength),n(e.target.result)},s.readAsArrayBuffer(e)}}function p(e){var t=new DataView(e);if(i&&console.log("Got file of length "+e.byteLength),255!=t.getUint8(0)||216!=t.getUint8(1))return i&&console.log("Not a valid JPEG"),!1;for(var n,o=2,r=e.byteLength;o<r;){if(255!=t.getUint8(o))return i&&console.log("Not a valid marker at offset "+o+", found: "+t.getUint8(o)),!1;if(n=t.getUint8(o+1),i&&console.log(n),225==n)return i&&console.log("Found 0xFFE1 marker"),b(t,o+4,t.getUint16(o+2));o+=2+t.getUint16(o+2)}}var m={120:"caption",110:"credit",25:"keywords",55:"dateCreated",80:"byline",85:"bylineTitle",122:"captionWriter",105:"headline",116:"copyright",15:"category"};function f(e,t,n){for(var i,o,r,s,a=new DataView(e),c={},h=t;h<t+n;)28===a.getUint8(h)&&2===a.getUint8(h+1)&&(s=a.getUint8(h+2))in m&&((r=a.getInt16(h+3))+5,o=m[s],i=w(a,h+5,r),c.hasOwnProperty(o)?c[o]instanceof Array?c[o].push(i):c[o]=[c[o],i]:c[o]=i),h++;return c}function g(e,t,n,o,r){var s,a,c,h=e.getUint16(n,!r),l={};for(c=0;c<h;c++)s=n+12*c+2,!(a=o[e.getUint16(s,!r)])&&i&&console.log("Unknown tag: "+e.getUint16(s,!r)),l[a]=v(e,s,t,n,r);return l}function v(e,t,n,i,o){var r,s,a,c,h,l,u=e.getUint16(t+2,!o),d=e.getUint32(t+4,!o),p=e.getUint32(t+8,!o)+n;switch(u){case 1:case 7:if(1==d)return e.getUint8(t+8,!o);for(r=d>4?p:t+8,s=[],c=0;c<d;c++)s[c]=e.getUint8(r+c);return s;case 2:return w(e,r=d>4?p:t+8,d-1);case 3:if(1==d)return e.getUint16(t+8,!o);for(r=d>2?p:t+8,s=[],c=0;c<d;c++)s[c]=e.getUint16(r+2*c,!o);return s;case 4:if(1==d)return e.getUint32(t+8,!o);for(s=[],c=0;c<d;c++)s[c]=e.getUint32(p+4*c,!o);return s;case 5:if(1==d)return h=e.getUint32(p,!o),l=e.getUint32(p+4,!o),(a=new Number(h/l)).numerator=h,a.denominator=l,a;for(s=[],c=0;c<d;c++)h=e.getUint32(p+8*c,!o),l=e.getUint32(p+4+8*c,!o),s[c]=new Number(h/l),s[c].numerator=h,s[c].denominator=l;return s;case 9:if(1==d)return e.getInt32(t+8,!o);for(s=[],c=0;c<d;c++)s[c]=e.getInt32(p+4*c,!o);return s;case 10:if(1==d)return e.getInt32(p,!o)/e.getInt32(p+4,!o);for(s=[],c=0;c<d;c++)s[c]=e.getInt32(p+8*c,!o)/e.getInt32(p+4+8*c,!o);return s}}function w(e,t,i){var o="";for(n=t;n<t+i;n++)o+=String.fromCharCode(e.getUint8(n));return o}function b(e,t){if("Exif"!=w(e,t,4))return i&&console.log("Not valid EXIF data! "+w(e,t,4)),!1;var n,o,r,u,d,p=t+6;if(18761==e.getUint16(p))n=!1;else{if(19789!=e.getUint16(p))return i&&console.log("Not valid TIFF data! (no 0x4949 or 0x4D4D)"),!1;n=!0}if(42!=e.getUint16(p+2,!n))return i&&console.log("Not valid TIFF data! (no 0x002A)"),!1;var m=e.getUint32(p+4,!n);if(m<8)return i&&console.log("Not valid TIFF data! (First offset less than 8)",e.getUint32(p+4,!n)),!1;if((o=g(e,p,p+m,a,n)).ExifIFDPointer)for(r in u=g(e,p,p+o.ExifIFDPointer,s,n)){switch(r){case"LightSource":case"Flash":case"MeteringMode":case"ExposureProgram":case"SensingMethod":case"SceneCaptureType":case"SceneType":case"CustomRendered":case"WhiteBalance":case"GainControl":case"Contrast":case"Saturation":case"Sharpness":case"SubjectDistanceRange":case"FileSource":u[r]=l[r][u[r]];break;case"ExifVersion":case"FlashpixVersion":u[r]=String.fromCharCode(u[r][0],u[r][1],u[r][2],u[r][3]);break;case"ComponentsConfiguration":u[r]=l.Components[u[r][0]]+l.Components[u[r][1]]+l.Components[u[r][2]]+l.Components[u[r][3]]}o[r]=u[r]}if(o.GPSInfoIFDPointer)for(r in d=g(e,p,p+o.GPSInfoIFDPointer,c,n)){switch(r){case"GPSVersionID":d[r]=d[r][0]+"."+d[r][1]+"."+d[r][2]+"."+d[r][3]}o[r]=d[r]}return o.thumbnail=function(e,t,n,i){var o=function(e,t,n){var i=e.getUint16(t,!n);return e.getUint32(t+2+12*i,!n)}(e,t+n,i);if(!o)return{};if(o>e.byteLength)return{};var r=g(e,t,t+o,h,i);if(r.Compression)switch(r.Compression){case 6:if(r.JpegIFOffset&&r.JpegIFByteCount){var s=t+r.JpegIFOffset,a=r.JpegIFByteCount;r.blob=new Blob([new Uint8Array(e.buffer,s,a)],{type:"image/jpeg"})}break;case 1:console.log("Thumbnail image format is TIFF, which is not implemented.");break;default:console.log("Unknown thumbnail image format '%s'",r.Compression)}else 2==r.PhotometricInterpretation&&console.log("Thumbnail image format is RGB, which is not implemented.");return r}(e,p,m,n),o}function y(e){var t={};if(1==e.nodeType){if(e.attributes.length>0){t["@attributes"]={};for(var n=0;n<e.attributes.length;n++){var i=e.attributes.item(n);t["@attributes"][i.nodeName]=i.nodeValue}}}else if(3==e.nodeType)return e.nodeValue;if(e.hasChildNodes())for(var o=0;o<e.childNodes.length;o++){var r=e.childNodes.item(o),s=r.nodeName;if(null==t[s])t[s]=y(r);else{if(null==t[s].push){var a=t[s];t[s]=[],t[s].push(a)}t[s].push(y(r))}}return t}function x(e){try{var t={};if(e.children.length>0)for(var n=0;n<e.children.length;n++){var i=e.children.item(n),o=i.attributes;for(var r in o){var s=o[r],a=s.nodeName,c=s.nodeValue;void 0!==a&&(t[a]=c)}var h=i.nodeName;if(void 0===t[h])t[h]=y(i);else{if(void 0===t[h].push){var l=t[h];t[h]=[],t[h].push(l)}t[h].push(y(i))}}else t=e.textContent;return t}catch(e){console.log(e.message)}}r.enableXmp=function(){r.isXmpEnabled=!0},r.disableXmp=function(){r.isXmpEnabled=!1},r.getData=function(e,t){return!((self.Image&&e instanceof self.Image||self.HTMLImageElement&&e instanceof self.HTMLImageElement)&&!e.complete)&&(u(e)?t&&t.call(e):d(e,t),!0)},r.getTag=function(e,t){if(u(e))return e.exifdata[t]},r.getIptcTag=function(e,t){if(u(e))return e.iptcdata[t]},r.getAllTags=function(e){if(!u(e))return{};var t,n=e.exifdata,i={};for(t in n)n.hasOwnProperty(t)&&(i[t]=n[t]);return i},r.getAllIptcTags=function(e){if(!u(e))return{};var t,n=e.iptcdata,i={};for(t in n)n.hasOwnProperty(t)&&(i[t]=n[t]);return i},r.pretty=function(e){if(!u(e))return"";var t,n=e.exifdata,i="";for(t in n)n.hasOwnProperty(t)&&("object"==typeof n[t]?n[t]instanceof Number?i+=t+" : "+n[t]+" ["+n[t].numerator+"/"+n[t].denominator+"]\r\n":i+=t+" : ["+n[t].length+" values]\r\n":i+=t+" : "+n[t]+"\r\n");return i},r.readFromBinaryFile=function(e){return p(e)},void 0===(o=function(){return r}.apply(t,[]))||(e.exports=o)}).call(this)}}]);